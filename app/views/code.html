<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Random Programming</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/js/ace/ace.js"></script>
    <script type="text/javascript" src="/js/ace/ext-language_tools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.2.1/processing.min.js"></script>
    <script src="/js/func.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
</head>

<!--app.jsの方でpathを通してる影響から、aceエディタが表示されないのかも-->

<body bgcolor=#f0ffff>
    <h1 align="center">Random Programming</h1>
    <div id="question">
        <!--サーバから問題文のテキストを受信して表示する-->
        <h2 style="color: red">課題</h2>
        <p>"hello world"を表示しなさい</p>
    </div>
    <table width=960px height=320px>
        <tr>
            <td>
                <div id="member">
                    <p>=====メンバー=====</p>
                </div>
            </td>
            <td width=400px height=320px bgcolor=white>
                <canvas id="canvas0" width="320px" height="320px"></canvas>
            </td>
            <td width=400px>
                <div align=right>
                    <div id="editor" style="height: 320px"></div>
                    <input type=button onclick="run()" value="RUN">
                    <input type=button onclick="stop()" value="STOP">
                </div>
            </td>
        </tr>
    </table>


    <script type="text/javascript">
        //aceエディター設定
        const editor = ace.edit('editor');
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/c_cpp");
        editor.setValue("new code here");

        //ソケット通信
        var socket = io.connect();
        var myData = '';

        socket.on("server_to_client_member", function (data) { appendMember(data) });
        socket.on("server_to_client_join", function (data) {
            myData = data;
            $("#member").append("<div>" + myData.name + "</div>");
        });

        function appendMember(data) {
            for (const member of data) {
                $("#member").append("<div>" + member.name + "</div>");
            };
        };


    </script>
</body>

</html>